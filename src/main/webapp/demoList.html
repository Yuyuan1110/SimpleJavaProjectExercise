<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jstlDemo</title>
    <link href="bootstrap-5.3.0-dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="jQuery/jquery-3.7.1.min.js"></script>
    <style>
        table {
            text-align: center;
        }

        h3 {
            font-size: 60px;
            text-align: center;
            font-family: "Lucida Console", "Courier New", monospace;;
        }

        .search-table {
            margin: 5px;
            float: left;
        }

        #add-and-del {
            margin: 5px;
            float: right;
        }
    </style>

    <script>
        function deleteUser(id) {
            if (confirm("You will delete user with id: " + id))
                location.href = "product/delete?id=" + id;
        }


        function delSelected() {
            document.getElementById("delSelected").onclick = function () {

                var cbs = document.getElementsByName("uid");
                var cbsListID = [];
                for (var i = 0; i < cbs.length; i++) {
                    if (cbs[i].checked) {
                        cbsListID.push(i + 1);
                    }
                }
                if (cbsListID.length > 0) {
                    if (confirm("Did you to delete the selected items?\n item: " + cbsListID))
                        document.getElementById("userListForm").submit();
                } else {
                    window.alert("Didn't selected anything!");
                }

            }
            return true;
        }

        $(function () {

            $.get("product/findAll", {}, function (data) {
                var lis = '<tr>'
                for (var i = 0; i < data.length; i++) {
                    var li = '<td><input type="checkbox" style="margin-top: 8px" name="uid" value="' + data[i].id + '"></td>' +
                        '<td>' + data[i].id + '</td>' +
                        '<td>' + data[i].brand + '</td>' +
                        '<td>' + data[i].product_name + '</td>' +
                        '<td>' + data[i].price + '</td>' +
                        '<td>' +
                        '<a class="btn btn-warning" href="">Alter</a>' +
                        '<a class="btn btn-danger" href="javascript:deleteUser(' + data[i].id + ')">Delete</a>' +
                        '</td>';
                    lis += li;
                }
                lis += '</td>'

                $("#product_contents").append(lis);
            })

            delSelected();
            $("#topCheckbox").click(function () {
                if ($("#topCheckbox").prop("checked")) {
                    $("input[name='uid']").prop("checked", true);
                } else {
                    $("input[name='uid']").prop("checked", false);
                }
            })
        })
        // window.onload = function () {
        //
        //     document.getElementById("topCheckbox").onclick = function () {
        //         var cbs = document.getElementsByName("uid");
        //         for (var i = 0; i < cbs.length; i++) {
        //             cbs[i].checked = this.checked;
        //         }
        //     }
        //     return true;
        // }
    </script>
</head>
<body>


<div class="container">
    <div class="row">
        <h3>Product List</h3>
    </div>

    <div class="row">
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
        <div class="col-1">1</div>
    </div>
    <div class="row ">
        <form class="row g-3" action="/product/search" method="post">
            <div class="col-2 align-self-center">
                <input type="text" placeholder="Product ID" name="PID">
            </div>
            <div class="col-2 align-self-center">
                <input type="text" placeholder="Product Brand" name="PB">
            </div>
            <div class="col-2 align-self-center">
                <input type="text" placeholder="Product Name" name="PN">
            </div>
            <div class="col-1 align-self-center">
                <button class="btn btn-primary" type="submit">Search</button>
            </div>
            <div class="col-1"></div>
            <div class="col-2 align-self-center" style="margin-left: 80px">
                <a class="btn btn-primary" href="/addProduct.html" role="button">ADD Product</a>
            </div>
            <div class="col-2 align-self-center" style="margin-left: -80px">
                <a class="btn btn-primary" href="javascript:delSelected()" id="delSelected" role="button">DELETE
                    SELECTED</a>
            </div>
        </form>


    </div>

    <div id="add-and-del">


    </div>

    <div>
        <form action="${pageContext.request.contextPath}/delSelectedServlet" method="post" id="userListForm">
            <table class="table table-striped table-hover" id="product_contents">
                <tr>
                    <td>Select All<br><input type="checkbox" id="topCheckbox"></td>
                    <td>ID</td>
                    <td>Brand</td>
                    <td>Product Name</td>
                    <td>Price</td>
                    <td>Operating</td>
                </tr>
<!--                <tr>-->
<!--                    <td><input type="checkbox" style="margin-top: 8px" name="uid" value=""></td>-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                    <td></td>-->
<!--                    <td>-->
<!--                        <a class="btn btn-warning"-->
<!--                           href="">Alter</a>-->
<!--                        <a class="btn btn-danger" href="javascript:deleteUser(,)">Delete</a>-->

<!--                    </td>-->
<!--                </tr>-->
            </table>
        </form>
    </div>
    <nav aria-label="Page navigation example">
        <ul class="pagination">
            <li class="page-item disabled">
                <a class="page-link"><<</a>
            </li>
            <li class="page-item active" aria-current="page"><a class="page-link" href="#">1</a></li>
            <li class="page-item " aria-current="page">
                <a class="page-link" href="#">2</a>
            </li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item">
                <a class="page-link" href="#"> >> </a>
            </li>
        </ul>
    </nav>

</div>
<script src="bootstrap-5.3.0-dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>